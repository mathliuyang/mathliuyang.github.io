<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学术提示词生成器</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg: #000000;
            --text: #ffffff;
            --text-dim: #666666;
            --accent: #ffffff;
            --border: rgba(255, 255, 255, 0.08);
            --success: #00ff00;
        }

        [data-theme="light"] {
            --bg: #ffffff;
            --text: #000000;
            --text-dim: #999999;
            --accent: #000000;
            --border: rgba(0, 0, 0, 0.08);
            --success: #00aa00;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.8;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: -0.02em;
            min-height: 100vh;
        }

        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1.5rem 4rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
        }

        [data-theme="light"] nav {
            background: rgba(255, 255, 255, 0.8);
        }

        .logo {
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            cursor: pointer;
        }

        .nav-right {
            display: flex;
            gap: 3rem;
            align-items: center;
        }

        .nav-links {
            display: flex;
            gap: 2.5rem;
            list-style: none;
        }

        .nav-links a {
            color: var(--text);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.02em;
            transition: color 0.3s ease;
            opacity: 0.6;
        }

        .nav-links a:hover,
        .nav-links a.active {
            opacity: 1;
        }

        .back-btn {
            display: inline-block;
            margin: 2rem 0;
            padding: 0.8rem 1.5rem;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.02em;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            border-color: var(--text);
            color: var(--bg);
            background: var(--text);
        }

        .theme-btn {
            width: 36px;
            height: 36px;
            border: 1px solid var(--border);
            background: transparent;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .theme-btn:hover {
            border-color: var(--text);
            transform: scale(1.1);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 120px 4rem 4rem;
        }

        .header {
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 300;
            margin-bottom: 0.5rem;
            letter-spacing: -0.02em;
        }

        .header p {
            color: var(--text-dim);
        }

        .mode-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 3rem;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            color: var(--text-dim);
            cursor: pointer;
            font-size: 0.95rem;
            letter-spacing: 0.05em;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab:hover {
            color: var(--text);
        }

        .tab.active {
            color: var(--text);
            border-bottom-color: var(--text);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Generator Mode */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .panel {
            border: 1px solid var(--border);
            padding: 2rem;
        }

        .panel-title {
            font-size: 1.2rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            letter-spacing: -0.01em;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: var(--text-dim);
            margin-bottom: 0.5rem;
        }

        .form-input,
        .form-textarea,
        .form-select {
            width: 100%;
            padding: 0.8rem;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
            font-size: 0.95rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }

        .form-input:focus,
        .form-textarea:focus,
        .form-select:focus {
            outline: none;
            border-color: var(--text);
        }

        .form-textarea {
            min-height: 120px;
            resize: vertical;
        }

        .form-select {
            cursor: pointer;
        }

        .radio-group {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .radio-item input[type="radio"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .generate-btn {
            width: 100%;
            padding: 1rem;
            background: var(--text);
            color: var(--bg);
            border: 1px solid var(--text);
            font-size: 0.9rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            margin-top: 1rem;
        }

        .generate-btn:hover {
            background: transparent;
            color: var(--text);
        }

        .output-textarea {
            width: 100%;
            min-height: 400px;
            padding: 1.5rem;
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
            font-size: 0.95rem;
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            resize: vertical;
        }

        .output-textarea:focus {
            outline: none;
            border-color: var(--text);
        }

        .output-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .action-btn {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text);
            font-size: 0.85rem;
            letter-spacing: 0.05em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
        }

        .action-btn:hover {
            background: var(--text);
            color: var(--bg);
            border-color: var(--text);
        }

        /* Templates Mode */
        .templates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
        }

        .template-card {
            border: 1px solid var(--border);
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .template-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background: var(--accent);
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .template-card:hover::before {
            transform: scaleX(1);
        }

        .template-card:hover {
            border-color: var(--text);
            transform: translateY(-5px);
        }

        .template-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .template-name {
            font-size: 1.3rem;
            font-weight: 500;
            margin-bottom: 0.8rem;
        }

        .template-desc {
            font-size: 0.9rem;
            color: var(--text-dim);
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .template-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .tag {
            padding: 0.3rem 0.8rem;
            border: 1px solid var(--border);
            font-size: 0.75rem;
            letter-spacing: 0.05em;
            color: var(--text-dim);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: var(--bg);
            border: 1px solid var(--border);
            max-width: 900px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 3rem;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 40px;
            height: 40px;
            border: 1px solid var(--border);
            background: transparent;
            color: var(--text);
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .modal-close:hover {
            border-color: var(--text);
            background: var(--text);
            color: var(--bg);
        }

        .modal-title {
            font-size: 2rem;
            font-weight: 300;
            margin-bottom: 2rem;
        }

        .modal-template {
            background: var(--border);
            padding: 2rem;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            white-space: pre-wrap;
            margin-bottom: 2rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
        }

        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            padding: 1rem 1.5rem;
            background: var(--text);
            color: var(--bg);
            border: 1px solid var(--text);
            font-size: 0.9rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            pointer-events: none;
            z-index: 1000;
        }

        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            nav {
                padding: 1rem 2rem;
            }

            .container {
                padding: 100px 2rem 2rem;
            }

            .mode-tabs {
                overflow-x: auto;
            }

            .templates-grid {
                grid-template-columns: 1fr;
            }

            .modal-content {
                padding: 2rem 1.5rem;
            }

            .modal-actions {
                flex-direction: column;
            }
        }
    </style>
</head>

<body>
    <nav>
        <div class="logo" onclick="location.href='../index.html'">图灵的猫</div>
        <div class="nav-right">
            <ul class="nav-links">
                <li><a href="../index.html">首页</a></li>
                <li><a href="../pages/about.html">关于我</a></li>
                <li><a href="../pages/blog.html">博客</a></li>
                <li><a href="../pages/projects.html">项目</a></li>
                <li><a href="../pages/publications.html">学术成果</a></li>
                <li><a href="../pages/tools.html" class="active">工具箱</a></li>
                <li><a href="../pages/contact.html">联系我</a></li>
            </ul>
            <button class="theme-btn" id="themeBtn">
                <span id="themeIcon">◐</span>
            </button>
        </div>
    </nav>

    <div class="container">
        <div class="header">
            <h1>学术提示词生成器</h1>
            <p>智能生成高质量的学术写作提示词，或从模板库中选择预设提示词</p>
        </div>

        <div class="mode-tabs">
            <button class="tab active" onclick="switchTab('generator')">智能生成</button>
            <button class="tab" onclick="switchTab('templates')">模板库</button>
        </div>

        <!-- Generator Mode -->
        <div id="generator" class="tab-content active">
            <div class="main-grid">
                <div class="panel">
                    <h2 class="panel-title">配置参数</h2>

                    <div class="form-group">
                        <label class="form-label">研究主题</label>
                        <input type="text" class="form-input" id="topic" placeholder="例如：深度学习在医学影像中的应用">
                    </div>

                    <div class="form-group">
                        <label class="form-label">任务类型</label>
                        <select class="form-select" id="taskType">
                            <option value="literature-review">文献综述</option>
                            <option value="hypothesis">研究假设生成</option>
                            <option value="methodology">方法论设计</option>
                            <option value="abstract">摘要撰写</option>
                            <option value="introduction">引言写作</option>
                            <option value="discussion">讨论部分</option>
                            <option value="analysis">数据分析</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">学科领域</label>
                        <select class="form-select" id="field">
                            <option value="computer-science">计算机科学</option>
                            <option value="biology">生物学</option>
                            <option value="medicine">医学</option>
                            <option value="physics">物理学</option>
                            <option value="chemistry">化学</option>
                            <option value="economics">经济学</option>
                            <option value="psychology">心理学</option>
                            <option value="other">其他</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">写作风格</label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="style" value="formal" checked>
                                <span>正式</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="style" value="casual">
                                <span>通俗</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="style" value="technical">
                                <span>技术性</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">字数要求</label>
                        <select class="form-select" id="length">
                            <option value="short">简短 (200-300字)</option>
                            <option value="medium" selected>中等 (500-800字)</option>
                            <option value="long">详细 (1000-1500字)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label class="form-label">额外要求（可选）</label>
                        <textarea class="form-textarea" id="requirements"
                            placeholder="例如：需要包含最新的研究进展，引用权威文献..."></textarea>
                    </div>

                    <button class="generate-btn" onclick="generatePrompt()">生成提示词</button>
                </div>

                <div class="panel">
                    <h2 class="panel-title">生成结果</h2>
                    <textarea class="output-textarea" id="output" placeholder="配置参数后点击生成..."></textarea>
                    <div class="output-actions">
                        <button class="action-btn" onclick="copyOutput()">复制</button>
                        <button class="action-btn" onclick="savePrompt()">保存</button>
                        <button class="action-btn" onclick="clearOutput()">清空</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Templates Mode -->
        <div id="templates" class="tab-content">
            <div class="templates-grid" id="templatesGrid"></div>
        </div>
    </div>

    <!-- Template Modal -->
    <div class="modal" id="templateModal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal()">×</button>
            <h2 class="modal-title" id="modalTitle"></h2>
            <div class="modal-template" id="modalTemplate"></div>
            <div class="modal-actions">
                <button class="action-btn" onclick="copyTemplate()">复制提示词</button>
                <button class="action-btn" onclick="useTemplate()">使用此模板</button>
            </div>
        </div>
    </div>

    <div class="toast" id="toast"></div>

    <script>
        // Theme toggle
        const themeBtn = document.getElementById('themeBtn');
        const themeIcon = document.getElementById('themeIcon');
        const currentTheme = localStorage.getItem('theme') || 'dark';

        document.documentElement.setAttribute('data-theme', currentTheme);
        themeIcon.textContent = currentTheme === 'dark' ? '◐' : '◑';

        // 添加图标颜色样式，确保在不同主题下都清晰可见
        themeIcon.style.color = currentTheme === 'dark' ? '#ffffff' : '#000000';

        themeBtn.addEventListener('click', () => {
            const theme = document.documentElement.getAttribute('data-theme');
            const newTheme = theme === 'dark' ? 'light' : 'dark';

            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            themeIcon.textContent = newTheme === 'dark' ? '◐' : '◑';
            themeIcon.style.color = newTheme === 'dark' ? '#ffffff' : '#000000';
        });

        // Template Library
        const templates = {
            'latex-translation': {
                name: 'LaTeX全文翻译',
                icon: '📄',
                desc: '专业的LaTeX学术文档翻译，参考Nature/Science标准',
                tags: ['翻译', 'LaTeX', '学术规范'],
                content: `理解全文意思后，翻译这篇 LaTeX 文档的内容为英文，遵循以下原则：

一、整体风格
参考标准：Nature、Science 等顶尖学术期刊。
核心原则：在保持高度学术专业性的同时，确保行文清晰、易于理解。
术语使用：采用精确、通用的学术术语。

二、句式结构
• 优先使用简单句及长度适中的句子。
• 严格避免冗长、嵌套过多的复合句。
• 对于原文中的复杂长句，应将其合理拆分，以增强可读性。

三、语言特点
语态：主要使用主动语态；仅在被动语态更符合特定学术表达习惯时使用。
措辞：力求精准、简练，消除冗余表述。
逻辑：保证逻辑衔接清晰流畅，但避免过度使用"因此"、"此外"等连接词。
语气：始终保持客观、严谨的学术口吻。

四、术语一致性
统一性：全文的专业术语翻译必须严格保持一致。
关键概念：对于关键概念、方法名称等，须确保前后表述完全统一。

五、翻译与编辑处理细则
符号与描述：翻译过程中，如发现表格/图表符号有误或描述不准确，应予以及时修正。
特殊内容：
  • 公式：保留原文，不予翻译。
  • 参考文献：保留原文格式，不予翻译。
格式规范：全程确保 LaTeX 语法及各类科学符号的准确性与规范性。`
            },
            'paper-polish': {
                name: '论文润色',
                icon: '✨',
                desc: '提升学术论文的语言表达和学术规范性',
                tags: ['润色', '学术写作', '语言优化'],
                content: `请对以下学术论文进行专业润色，提升其学术表达质量：

润色要求：
1. 语言表达
   • 确保语法正确，用词精准
   • 提升句式多样性，避免重复
   • 增强学术性和专业性

2. 逻辑结构
   • 优化段落间的逻辑衔接
   • 加强论证的连贯性
   • 确保论点清晰明确

3. 学术规范
   • 符合学术写作规范
   • 使用恰当的学术术语
   • 保持客观、严谨的学术语气

4. 可读性
   • 简化复杂句式
   • 消除冗余表述
   • 提高整体可读性

请在保持原意的基础上进行改进，标注重要修改之处并说明修改理由。`
            },
            'abstract-writing': {
                name: '摘要撰写',
                icon: '📋',
                desc: '撰写结构完整、逻辑清晰的学术论文摘要',
                tags: ['摘要', '论文写作', '结构化'],
                content: `请根据以下研究内容，撰写一篇结构完整、逻辑清晰的学术论文摘要：

摘要要求：
1. 结构（150-250字）
   • 研究背景：简要说明研究问题和意义
   • 研究方法：概述采用的方法和技术
   • 主要发现：呈现核心研究结果
   • 研究结论：总结研究价值和影响

2. 写作原则
   • 语言精练，信息密度高
   • 避免使用第一人称
   • 不出现引用和图表
   • 独立成篇，自成体系

3. 关键要素
   • 突出创新点
   • 强调研究贡献
   • 体现研究价值

请确保摘要能够准确反映论文核心内容，吸引读者兴趣。`
            },
            'literature-review': {
                name: '文献综述',
                icon: '📚',
                desc: '系统梳理研究领域的文献和研究进展',
                tags: ['文献综述', '研究现状', '批判性分析'],
                content: `请针对以下主题撰写系统的文献综述：

综述要求：
1. 综述结构
   • 研究背景：介绍研究领域和重要性
   • 研究现状：梳理国内外研究进展
   • 研究方法：总结常用研究方法
   • 研究发现：归纳主要研究成果
   • 问题与展望：指出现有问题和未来方向

2. 分析方法
   • 按时间顺序梳理研究脉络
   • 按主题分类组织文献
   • 对比不同研究观点
   • 评价研究方法的优劣

3. 写作要求
   • 客观公正，避免主观臆断
   • 全面系统，覆盖重要文献
   • 逻辑清晰，层次分明
   • 引用规范，注明出处

4. 批判性思维
   • 指出研究的不足之处
   • 提出改进建议
   • 展望未来研究方向

请提供结构化的文献综述框架和关键内容要点。`
            },
            'methodology': {
                name: '研究方法设计',
                icon: '🔬',
                desc: '设计科学、可行的研究方法和实验方案',
                tags: ['方法论', '实验设计', '数据收集'],
                content: `请为以下研究课题设计科学、可行的研究方法：

方法设计要求：
1. 研究设计
   • 确定研究类型（实验、调查、案例等）
   • 明确研究变量（自变量、因变量、控制变量）
   • 设计研究流程和步骤

2. 数据收集
   • 确定数据来源和类型
   • 设计数据采集方法
   • 制定样本选择标准
   • 规划数据量和时间周期

3. 数据分析
   • 选择合适的分析方法
   • 确定统计检验方法
   • 规划可视化方案

4. 质量控制
   • 确保研究的信度和效度
   • 控制混淆变量
   • 设计对照组或基准

5. 伦理考虑
   • 说明伦理审查要求
   • 数据隐私保护措施
   • 知情同意程序

请提供详细的方法学说明，确保研究可重复、可验证。`
            },
            'data-analysis': {
                name: '数据分析指导',
                icon: '📊',
                desc: '提供专业的数据分析方法和解读指导',
                tags: ['数据分析', '统计方法', '结果解读'],
                content: `请为以下数据分析任务提供专业指导：

分析指导内容：
1. 数据预处理
   • 数据清洗：处理缺失值、异常值
   • 数据转换：标准化、归一化
   • 特征工程：特征选择、特征构建

2. 探索性分析
   • 描述性统计：均值、中位数、方差等
   • 数据分布：直方图、箱线图
   • 相关性分析：变量间关系

3. 统计分析
   • 假设检验：t检验、卡方检验等
   • 方差分析：ANOVA
   • 回归分析：线性、非线性回归

4. 高级分析
   • 聚类分析
   • 主成分分析
   • 时间序列分析
   • 机器学习方法

5. 结果解读
   • 统计显著性说明
   • 效应量评估
   • 结果的实际意义
   • 局限性讨论

6. 可视化建议
   • 选择合适的图表类型
   • 设计清晰的可视化方案
   • 突出关键发现

请根据数据特点和研究目标，推荐最合适的分析方法。`
            },
            'research-proposal': {
                name: '研究提案',
                icon: '📝',
                desc: '撰写完整的研究计划书或课题申请书',
                tags: ['研究提案', '课题申请', '项目规划'],
                content: `请撰写一份完整的研究提案/课题申请书：

提案结构：
1. 研究背景与意义
   • 研究问题的提出
   • 国内外研究现状
   • 研究的理论价值和实际意义

2. 研究目标与内容
   • 总体目标
   • 具体研究内容
   • 拟解决的关键问题

3. 研究方案
   • 研究思路和技术路线
   • 研究方法和手段
   • 可行性分析

4. 创新点
   • 理论创新
   • 方法创新
   • 应用创新

5. 研究计划
   • 时间安排
   • 阶段性目标
   • 预期成果

6. 研究基础
   • 前期工作基础
   • 研究条件
   • 团队优势

7. 预算说明
   • 经费预算
   • 资源需求

请确保提案逻辑清晰、论证充分、具有创新性和可行性。`
            },
            'results-discussion': {
                name: '结果与讨论',
                icon: '💡',
                desc: '撰写论文的结果分析和讨论部分',
                tags: ['结果分析', '讨论', '科学解读'],
                content: `请撰写论文的结果与讨论部分：

撰写要求：
1. 结果呈现
   • 客观呈现研究数据和发现
   • 使用表格和图表清晰展示
   • 按逻辑顺序组织结果
   • 突出关键发现

2. 统计分析
   • 报告统计检验结果
   • 说明显著性水平
   • 提供必要的统计参数

3. 结果解读
   • 解释结果的含义
   • 与假设或预期对比
   • 指出意外或特殊发现

4. 讨论深度
   • 将结果与文献比较
   • 分析结果的理论意义
   • 探讨潜在机制
   • 讨论实际应用价值

5. 局限性
   • 诚实讨论研究局限
   • 说明可能的影响
   • 提出改进建议

6. 未来研究
   • 基于发现提出新问题
   • 建议未来研究方向

请确保讨论有深度、有洞察力，避免过度解读或循环论证。`
            }
        };

        let currentTemplate = null;

        // Render templates
        function renderTemplates() {
            const grid = document.getElementById('templatesGrid');
            grid.innerHTML = Object.entries(templates).map(([id, template]) => `
                <div class="template-card" onclick="showTemplateModal('${id}')">
                    <div class="template-icon">${template.icon}</div>
                    <div class="template-name">${template.name}</div>
                    <div class="template-desc">${template.desc}</div>
                    <div class="template-tags">
                        ${template.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `).join('');
        }

        // Switch tabs
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            event.target.classList.add('active');
            document.getElementById(tab).classList.add('active');

            if (tab === 'templates' && document.getElementById('templatesGrid').children.length === 0) {
                renderTemplates();
            }
        }

        // Show template modal
        function showTemplateModal(templateId) {
            const template = templates[templateId];
            if (!template) return;

            currentTemplate = template;
            document.getElementById('modalTitle').textContent = template.name;
            document.getElementById('modalTemplate').textContent = template.content;
            document.getElementById('templateModal').classList.add('show');
        }

        function closeModal() {
            document.getElementById('templateModal').classList.remove('show');
            currentTemplate = null;
        }

        function copyTemplate() {
            if (!currentTemplate) return;
            navigator.clipboard.writeText(currentTemplate.content);
            showToast('模板已复制到剪贴板');
        }

        function useTemplate() {
            if (!currentTemplate) return;
            document.getElementById('output').value = currentTemplate.content;
            closeModal();
            // Switch to generator tab
            document.querySelectorAll('.tab')[0].click();
            showToast('模板已加载到生成器');
        }

        // Generate prompt
        function generatePrompt() {
            const topic = document.getElementById('topic').value;
            const taskType = document.getElementById('taskType').value;
            const field = document.getElementById('field').value;
            const style = document.querySelector('input[name="style"]:checked').value;
            const length = document.getElementById('length').value;
            const requirements = document.getElementById('requirements').value;

            if (!topic) {
                showToast('请输入研究主题');
                return;
            }

            const prompt = generatePromptContent(topic, taskType, field, style, length, requirements);
            document.getElementById('output').value = prompt;
        }

        function generatePromptContent(topic, taskType, field, style, length, requirements) {
            const taskDescriptions = {
                'literature-review': '进行全面的文献综述',
                'hypothesis': '生成研究假设',
                'methodology': '设计研究方法',
                'abstract': '撰写学术摘要',
                'introduction': '撰写引言部分',
                'discussion': '撰写讨论部分',
                'analysis': '进行数据分析'
            };

            const lengthDescriptions = {
                'short': '简洁明了，字数控制在200-300字',
                'medium': '详细阐述，字数控制在500-800字',
                'long': '深入分析，字数控制在1000-1500字'
            };

            const styleDescriptions = {
                'formal': '使用正式的学术语言，严谨准确',
                'casual': '使用通俗易懂的语言，便于理解',
                'technical': '使用专业术语，技术性强'
            };

            let prompt = `请以${styleDescriptions[style]}的方式，针对"${topic}"这一主题${taskDescriptions[taskType]}。\n\n`;
            prompt += `要求：\n`;
            prompt += `1. 学科领域：${field}\n`;
            prompt += `2. 篇幅：${lengthDescriptions[length]}\n`;
            prompt += `3. 写作风格：${styleDescriptions[style]}\n`;

            if (requirements) {
                prompt += `4. 额外要求：${requirements}\n`;
            }

            prompt += `\n请确保内容：\n`;
            prompt += `- 逻辑清晰，结构完整\n`;
            prompt += `- 论据充分，有理有据\n`;
            prompt += `- 语言准确，表达专业\n`;
            prompt += `- 符合学术规范和写作标准\n`;

            if (taskType === 'literature-review') {
                prompt += `\n在综述中请包含：\n`;
                prompt += `- 研究背景和意义\n`;
                prompt += `- 国内外研究现状\n`;
                prompt += `- 研究方法和主要发现\n`;
                prompt += `- 存在的问题和未来展望\n`;
            }

            return prompt;
        }

        function copyOutput() {
            const output = document.getElementById('output').value;
            if (!output) {
                showToast('没有可复制的内容');
                return;
            }
            navigator.clipboard.writeText(output);
            showToast('已复制到剪贴板');
        }

        function savePrompt() {
            const output = document.getElementById('output').value;
            if (!output) {
                showToast('没有可保存的内容');
                return;
            }
            const prompts = JSON.parse(localStorage.getItem('savedPrompts') || '[]');
            prompts.unshift({
                content: output,
                date: new Date().toLocaleString('zh-CN')
            });
            if (prompts.length > 10) prompts.pop();
            localStorage.setItem('savedPrompts', JSON.stringify(prompts));
            showToast('已保存');
        }

        function clearOutput() {
            document.getElementById('output').value = '';
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }

        // Make functions global
        window.switchTab = switchTab;
        window.showTemplateModal = showTemplateModal;
        window.closeModal = closeModal;
        window.copyTemplate = copyTemplate;
        window.useTemplate = useTemplate;
        window.generatePrompt = generatePrompt;
        window.copyOutput = copyOutput;
        window.savePrompt = savePrompt;
        window.clearOutput = clearOutput;

        // Click outside modal to close
        document.getElementById('templateModal').addEventListener('click', (e) => {
            if (e.target.id === 'templateModal') {
                closeModal();
            }
        });
    </script>
</body>

</html>